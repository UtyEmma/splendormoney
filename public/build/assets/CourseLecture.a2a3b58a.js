import{B as C}from"./Button.9b9201ed.js";import{I as u}from"./InputError.2613fea2.js";import{u as j}from"./CourseContext.54a3a102.js";import{F}from"./Form.0fac4ef2.js";import{b as x,a as t,j as e}from"./app.1ed4ea61.js";const T=({lecture:a,index:f,module_no:p})=>{const{data:i,setData:n,errors:c,processing:h,put:b,...N}=x({title:a.title,file:"",description:a.description,duration:0}),{course:r,setCourse:d}=j(),m=l=>{n(l.currentTarget.name,F.value(l.currentTarget))},g=l=>{l.preventDefault(),b(route("admin.courses.modules.lecture.update",{lecture:a.id,course:r==null?void 0:r.id,module:a.module_id}),{onSuccess:s=>{d(s.props.course)}})},v=()=>{N.delete(route("admin.courses.modules.lecture.delete",{lecture:a.id,course:r==null?void 0:r.id,module:a.module_id}),{onSuccess:l=>{d(l.props.course)}})},L=l=>{const s=l.currentTarget.files[0];if(s.type.split("/")[0]=="video"){const y=URL.createObjectURL(s);var o=document.createElement("video");o.preload="metadata",o.src=y,o.onloadedmetadata=function(){window.URL.revokeObjectURL(o.src),n("duration",o.duration),n(s,s)}}n("file",s)};return t("div",{className:"faq-grid",children:[t("div",{className:"faq-header d-flex justify-content-between",children:[t("a",{className:"collapsed faq-collapse","data-bs-toggle":"collapse",href:"#collapseOne-"+a.id,children:[e("i",{className:"fas fa-align-justify"})," Lecture: ",p,":",f," ",a.title]}),t("div",{className:"faq-right",children:[e("a",{className:"btn btn-outline btn-outline-primary btn-sm btn-icon p-0","data-bs-toggle":"collapse",href:"#collapseOne-"+a.id,children:e("i",{className:"far fa-pen-to-square"})}),e("button",{onClick:v,className:"btn btn-outline btn-outline-danger btn-icon",children:e("i",{className:"far fa-trash-can"})})]})]}),e("div",{id:"collapseOne-"+a.id,className:"collapse","data-bs-parent":"#lecture-accordion",children:e("div",{className:"faq-body",children:t("form",{onSubmit:g,children:[t("div",{className:"row",children:[e("div",{className:"col-md-7",children:t("div",{className:"form-group",children:[e("label",{htmlFor:"",className:"form-label",children:"Lecture Title"}),e("input",{type:"text",onChange:m,name:"title",defaultValue:i.title,className:"form-control"}),e(u,{message:c.title})]})}),e("div",{className:"col-md-5",children:t("div",{className:"form-group",children:[e("label",{htmlFor:"",className:"form-label",children:"Lecture File"}),e("input",{type:"file",name:"file",onChange:L,className:"form-control"}),e(u,{message:c.file})]})}),e("div",{children:t("div",{className:"form-group",children:[e("label",{htmlFor:"",className:"form-label",children:"Lecture Description"}),e("textarea",{name:"description",defaultValue:i.description,onChange:m,className:"form-control"})]})})]}),e("div",{className:"d-flex justify-content-between",children:e(C,{loading:h,className:"btn btn-primary",children:"Update Lecture"})})]})})})]})};export{T as CourseLecture};
