import{B as v}from"./Button.308c5ec0.js";import{I as m}from"./InputError.85f33561.js";import{u as L}from"./CourseContext.c4a3e5a3.js";import{F as C}from"./Form.0fac4ef2.js";import{b as F,a as e,j as t}from"./app.f808fee2.js";const T=({setShowNew:s,module:d})=>{const{data:c,setData:l,processing:u,post:f,errors:n}=F({title:"",file:"",description:"",duration:0}),{course:h,setCourse:p}=L(),i=r=>{l(r.currentTarget.name,C.value(r.currentTarget))},b=r=>{r.preventDefault(),console.log(c),f(route("admin.courses.modules.lecture.store",{course:h.id,module:d.id}),{onSuccess:o=>{p(o.props.course),s(!1)}})},N=r=>{const o=r.currentTarget.files[0],g=URL.createObjectURL(o);var a=document.createElement("video");a.preload="metadata",a.src=g,a.onloadedmetadata=function(){window.URL.revokeObjectURL(a.src),l("duration",a.duration),l("file",o)}};return e("div",{children:t("form",{onSubmit:b,children:[e("div",{children:e("h5",{className:"mb-2",children:"New Lecture"})}),t("div",{className:"row",children:[e("div",{className:"col-md-7",children:t("div",{className:"form-group",children:[e("label",{htmlFor:"",className:"form-label",children:"Lecture Title"}),e("input",{type:"text",onChange:i,name:"title",defaultValue:c.title,className:"form-control"}),e(m,{message:n.title})]})}),e("div",{className:"col-md-5",children:t("div",{className:"form-group",children:[e("label",{htmlFor:"",className:"form-label",children:"Lecture File"}),e("input",{type:"file",name:"file",onChange:N,className:"form-control"}),e(m,{message:n.file})]})}),e("div",{children:t("div",{className:"form-group",children:[e("label",{htmlFor:"",className:"form-label",children:"Lecture Description"}),e("textarea",{name:"description",onChange:i,className:"form-control"})]})})]}),t("div",{className:"d-flex justify-content-between",children:[e("button",{className:"btn btn-white",onClick:()=>s(!1),type:"button",children:"Cancel"}),e(v,{loading:u,className:"btn btn-primary",children:"Create Lecture"})]})]})})};export{T as NewLecture};
